{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "config": {
    "view": {
      "stroke": ""
    }
  },
  "width": "container",
  "height": 700,
  "background": null,
  "data": {
    "url": "https://raw.githubusercontent.com/ChaiKeRou/3179/main/data/deaths_2000_2022.csv"
  },
  "transform": [
    {
      "filter": "datum.Year >= 2013 && datum.Year <= 2022"
    },
    {
      "window": [
        {
          "op": "rank",
          "as": "sortOrder"
        }
      ],
      "groupby": [
        "Causes of death"
      ],
      "frame": [
        null,
        null
      ],
      "sort": [
        {
          "field": "order",
          "order": "ascending"
        }
      ]
    }
  ],
  "hconcat": [
    {
      "width": 5,
      "height": 600,
      "view": {
        "stroke": null
      },
      "mark": {
        "type": "text",
        "align": "right",
        "font": "Outfit",
        "fontWeight": 600,
        "fontSize": 13
      },
      "encoding": {
        "y": {
          "field": "Causes of death",
          "type": "nominal",
          "sort": {
            "field": "sortOrder",
            "order": "ascending"
          },
          "axis": null,
          "padding": 0
        },
        "text": {
          "field": "Causes of death",
          "type": "nominal"
        }
      }
    },
    {
      "layer": [
        {
          "width": 480,
          "height": 600,
          "mark": {
            "type": "line",
            "point": {
              "size": 500
            }
          },
          "selection": {
            "CauseSelection": {
              "type": "multi",
              "fields": [
                "Causes of death"
              ],
              "on": "click"
            }
          },
          "encoding": {
            "x": {
              "field": "Year",
              "type": "ordinal",
              "axis": {
                "labelAngle": 0,
                "labelPadding": 8,
                "titleFont": "Outfit",
                "labelFont": "Outfit",
                "titleFontWeight": 700,
                "labelFontWeight": 200,
                "titleFontSize": 12,
                "labelFontSize": 10,
                "titlePadding": 10,
                "labelAlign": "center"
              }
            },
            "y": {
              "field": "Rank",
              "type": "ordinal",
              "title": "Rank",
              "sort": [
                "1",
                "2",
                "3",
                "4",
                "5",
                "6",
                "7",
                "8",
                "9",
                "10",
                "11",
                "12",
                "13",
                "14",
                "15",
                "16",
                "17",
                "18",
                "19",
                "20"
              ],
              "axis": null
            },
            "order": {
              "field": "Year",
              "type": "ordinal"
            },
            "color": {
              "field": "Causes of death",
              "type": "nominal",
              "legend": null,
              "scale": {
                "range": [
                  "#dcd2c8",
                  "#e17300",
                  "#dcd2c8",
                  "#4a7b89",
                  "#dcd2c8",
                  "#dcd2c8",
                  "#dcd2c8",
                  "#aa9228",
                  "#dcd2c8",
                  "#dcd2c8",
                  "#dcd2c8",
                  "#dcd2c8",
                  "#dcd2c8",
                  "#dcd2c8",
                  "#dcd2c8",
                  "#dcd2c8",
                  "#dcd2c8",
                  "#dcd2c8",
                  "#dcd2c8",
                  "#dcd2c8"
                ]
              }
            },
            "opacity": {
              "condition": {
                "selection": "CauseSelection",
                "value": 1
              },
              "value": 0.2
            },
            "tooltip": [
              {
                "field": "Causes of death",
                "title": "Cause of Death",
                "type": "nominal"
              },
              {
                "field": "Year",
                "title": "Year",
                "type": "ordinal"
              },
              {
                "field": "Deaths",
                "title": "Death Case",
                "type": "quantitative",
                "format": ","
              }
            ]
          }
        },
        {
          "mark": {
            "type": "text",
            "align": "center",
            "baseline": "middle",
            "dx": 0,
            "dy": 0
          },
          "encoding": {
            "color": {
              "condition": [
                {
                  "test": "datum['Causes of death'] == 'COVID-19 infection'",
                  "value": "#ebecdf"
                },
                {
                  "test": "datum['Causes of death'] == 'Asthma'",
                  "value": "#ebecdf"
                },
                {
                  "test": "datum['Causes of death'] == 'Diabetes mellitus '",
                  "value": "#ebecdf"
                }
              ],
              "value": "#3f2b12"
            },
            "text": {
              "field": "Rank",
              "type": "ordinal"
            },
            "x": {
              "field": "Year",
              "type": "ordinal"
            },
            "y": {
              "field": "Rank",
              "type": "ordinal",
              "sort": [
                "1",
                "2",
                "3",
                "4",
                "5",
                "6",
                "7",
                "8",
                "9",
                "10",
                "11",
                "12",
                "13",
                "14",
                "15",
                "16",
                "17",
                "18",
                "19",
                "20"
              ]
            }
          }
        },
        {
          "mark": {
            "type": "text",
            "fontStyle": "normal",
            "font": "Outfit",
            "align": "center",
            "baseline": "middle",
            "dx": 40,
            "dy": -350,
            "fontSize": 12,
            "fontWeight": 300,
            "color": "#393939",
            "lineBreak": "\n",
            "lineHeight": 15
          },
          "encoding": {
            "text": {
              "value": "Old age 65 years and over was continued as the principal causes of death\n for one decade except in 2021 which led by COVID-19 infection."
            }
          }
        },
        {
          "mark": {
            "type": "rule",
            "color": "#393939",
            "strokeWidth": 0.5
          },
          "encoding": {
            "x": {
              "value": 350
            },
            "x2": {
              "value": 400
            },
            "y": {
              "value": -25
            },
            "y2": {
              "value": 5
            }
          }
        }
      ]
    }
  ]
}